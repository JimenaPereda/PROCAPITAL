"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("react"),t=require("react-dom"),n=function(t){var n=e.useRef(t);return n.current=t,n},r=function(e,t){void 0===t&&(t=100);var n=setTimeout((function(){clearTimeout(n),e()}),t)},o=function(n,o,u,c,i){return function(d){var a=d.children,l=e.useState(),s=l[0],f=l[1];return e.useEffect((function(){return u?(f(document.getElementById(n)||function(e){var t=document.createElement("div");return t.setAttribute("id",e),document.body.appendChild(t),t}(n)),function(){s&&r((function(){o&&""===s.innerHTML&&s.remove()}))}):function(){return null}}),[s]),e.useEffect((function(){if(!u||!s)return function(){return null};var e=!1,t=function(t){e=!s.contains(t.target)},n=function(t){e&&c(t)},r=function(e){"Escape"===e.key&&i(e)};return c&&(document.addEventListener("mousedown",t),document.addEventListener("click",n)),i&&document.addEventListener("keydown",r),function(){c&&(document.removeEventListener("mousedown",t),document.removeEventListener("click",n)),i&&document.removeEventListener("keydown",r)}}),[s]),u&&s?t.createPortal(a,s):null}};exports.default=function(t){var u=void 0===t?{}:t,c=u.containerId,i=void 0===c?"react-cool-portal":c,d=u.autoRemoveContainer,a=void 0===d||d,l=u.defaultShow,s=void 0===l||l,f=u.clickOutsideToHide,v=void 0===f||f,m=u.escToHide,k=void 0===m||m,p=u.internalShowHide,E=void 0===p||p,w=u.onShow,C=u.onHide,b=e.useState(s),h=b[0],L=b[1],S=e.useRef(!1),y=n(w),x=n(C),H=e.useRef(s),R=e.useCallback((function(){v&&(S.current=!0,r((function(){S.current=!1})))}),[v]),T=e.useCallback((function(e){R(),H.current||(L(!0),H.current=!0,y.current&&y.current(e))}),[R]),g=e.useCallback((function(e){R(),H.current&&(L(!1),H.current=!1,x.current&&x.current(e))}),[R]),I=e.useCallback((function(e){H.current?g(e):T(e)}),[g,T]),P=e.useCallback((function(e){S.current||g(e)}),[g]);return{Portal:e.useCallback(o(i,a,!E||h,v?P:void 0,k?P:void 0),[E,h]),isShow:h,show:T,hide:g,toggle:I}},exports.defaultContainerId="react-cool-portal",exports.initAutoRemoveContainer=true,exports.initShow=true;
